# Angular js 
 
> ###angular js 是什么？

官方文档介绍：完全使用Javascript编写的客户端技术，同其他历史悠久的Web技术（HTML,CSS,JS）配合使用，使web应用开发比以往更简单，更方便。

angular js 其实就是一种创建动态Web应用的结构化框架

框架又分好多种，例如MVC(Model-View-Controller) MVP(Model-View-Presenter) MVVM（Model-View-ViewModel)框架等

angular js 就是MVVM框架的，
MVVM 是完全的改革，它将“数据模型数据双向绑定”的思想作为核心，因此在View和Model之间没有联系，通过ViewModel进行交互，而且Model和ViewModel之间的交互是双向的，因此视图的数据的变化会同时修改数据源，而数据源数据的变化也会立即反应到View上。


![mvvm](http://images2015.cnblogs.com/blog/112316/201606/112316-20160616144255948-1076854192.png)


> ### angular js 优点？

```
1.自定义文档模型（dom）元素的创建。

2.组件化 明确的ui设计与替换

3.降低代码的耦合性，提高代码的利用率，

4.框架支持HTML语法的拓展，直接创建可复用的组件。

5.双向数据的绑定

6.有良好的代码复用（angular库）

```


> ### angular js 包含以下几大模块


```
1.控制器 controller
2.指令 directive
3.过滤器  filter
5.服务  provider  factory  service  value  constant
6.路由  ui-router  ng-router
7.依赖注入  injector
 
```
> ### angular js 下载

1.1 通过npm进行下载

```
$npm install angular
```
1.2 通过bower进行下载

```
$bower install angular
```
1.3 引入angular.js

```
<script src="angular.js"></script>
```
1.4 为了方便学了，可以安装扩展程序 ng-inspector

***

> ##ng-app 

```
ng-app(rootScope->ngapp) 在指定标签上添加跟作用域  例如<html ng-app>
ng-app 指令 是指在网页加载完毕时会自动引导（自动初始化）应用
ng-app下的内容都归angular所管理
```
> ##ng-model 

angular 是一个mvvm的框架，其主要就是体现在ng-model上，angular将model和view之间的联系切断，自己内部通过ng-model去实现ViewModel层，具体的细节如下表，我们就看下我们要用的部分。

![ngmodel](http://img.blog.csdn.net/20151020211524806)
在每个使用ng-model的地方，都会创建一个ngModelController实例，这个实例负责管理存储在模型（由model指定）中的值与元素显示值之间的数据绑定。
ngModelController包含有$formatters和$parsers数组,会在每次更新数据绑定是调用。

当我们从页面或通过$setViewValue改变绑定的属性时，会遍历执行$parsers数组里面的方法，而当我们直接在js里面通过赋值语句修改时，则会调用$formatters数组。

```
$scope.$watch(function ngModelWatch() {
    var modelValue = ngModelGet($scope);

    // if scope model value and ngModel value are out of sync
    // TODO(perf): why not move this to the action fn?
    if (modelValue !== ctrl.$modelValue &&
       // checks for NaN is needed to allow setting the model to NaN when there's an asyncValidator
       (ctrl.$modelValue === ctrl.$modelValue || modelValue === modelValue)
    ) {
      ctrl.$modelValue = ctrl.$$rawModelValue = modelValue;
      parserValid = undefined;

      var formatters = ctrl.$formatters,
          idx = formatters.length;

      var viewValue = modelValue;
      while (idx--) {
        viewValue = formatters[idx](viewValue);
      }
      if (ctrl.$viewValue !== viewValue) {
        ctrl.$viewValue = ctrl.$$lastCommittedViewValue = viewValue;
        ctrl.$render();

        ctrl.$$runValidators(modelValue, viewValue, noop);
      }
    }

    return modelValue;
  });
}];
```
上面是angular调用$formatters的地方，它监控了model值的变化，负责model->view。

```
将ng-model生成数据模型然后挂在当前作用域上
<input type="text" ng-model="name">
变量和视图进行绑定，取出模型上的数据
{{name}}
```
> ##表达式{{}}

```
两个花括号{{}}组成，可以把数据绑定到HTML
{{name}}
{{name?name:'hello zfpx'}}
```

> ##ng-bind 

```
 <div ng-bind="name"></div>
 防止用户看到被渲染之前的样子 显示数据等同于{{}},只能绑定一个问题
 ng-bind-template  绑定多个
 <div ng-bind-template="{{name}} {{age}}"></div>
 
```
> ##ng-init

ng-init 在当前作用下定义初始值

```
<div ng-init="name='zfpx';age=7"></div>

<div ng-init="name=[{age:7},{age:8}]"></div>
通常情况下，不使用ng-init，使用一个控制器或模块来代替它

```

> ## ng-repeat遍历

```
<div ng-init="phones=[{name:'苹果',type:['白色','金色','玫瑰金']},{name:'华为',type:['白色','金色']},{name:'htc',type:['玫瑰金']}]">
    <div ng-repeat="(key,phone) in phones">
        <div ng-repeat="(index,type) in phone.type">
            {{key}}{{index}}{{type}}
        </div>
    </div>
</div>
```
```
遍历数组需注意track by $index  通过索引一一对应遍历
<div ng-init="phones=['苹果','苹果','苹果']">
    <div ng-repeat="phone in phones  track by $index" >
        {{phone}}
    </div>
</div>

```
> ## ng-hide/ng-show/ng-if 

ng-show/ng-hide 简单的操作css样式而已  允许我们显示或隐藏不同的元素。

```
<div ng-show='hello'>显示</div>
<div ng-show='hello==hello'>显示</div>
<div ng-show='say()'>显示</div>

```
上面的这些都可以用于ng-show或者ng-hide。如果值或表达式或函数返回true，则会隐藏一些东西。

ng-if 为false时候内部节点消失，内部指定不执行，ng-if不停的修改dom性能消耗较大,使用ng-show,ng-if与ng-repeat经常连用.

```
<div ng-init="flag=false" ng-click="flag=!flag">
    {{!flag?'显示':'隐藏'}}
</div>
<div ng-if="flag">content</div>
```
> ##ng-class

给元素增加css样式，

```
4种写法
<div ng-class ="{true:'red',false:'yellow'}[isActive]"></div>
当isActive为ture的时候 是红色 false 为黄色
<div ng-class ="{'selected':isSelected}"></div>
<div ng-class ="{'current':[true]}"></div>
选中时样式
<div ng-style ="{color:'red'}"></div>
行内样式
```

> ##内置过滤器

###1.1 currency 货币过滤器

```
{{100 | currency:'￡' }}
```
###1.2 lowercase & uppercase  大小写过滤器

```
{{'abc' | uppercase }}
{{'ABC' | lowercase }}
```
###1.3 limitTo 限制位数

```
{{123456 | limitTo:5}}
```
###1.4 number 数字过滤器 

```
{{1234.2345|number:2}}
```
###1.5 date 日期过滤器

```
{{1654325689063 | date:'yyyy-MM-dd hh:mm:ss'}}
```
###1.6 orderBy 排序，正反序（true/false）

```
<div ng-repeat="p in phones | orderBy:'age':'reverse'">
    {{p.name}}
</div>
```

###1.7  filter 查询过滤器

```
查询全部值
<div ng-repeat="p in phones | filter:age">
    {{p.name}}
</div>
查询全指定字段
<div ng-repeat="p in phones | filter:{age:query}">">
    {{p.name}}
</div>
```
> ## angular 常用的方法

###uppercase&&lowercase
```
var abc = angular.uppercase("aaaa");
console.log(abc);
var abc = angular.lowercase("aaaa");
console.log(abc);
```
###fromJson&&toJson
```
var obj = '{"aa":123,"bb":456}';
var a =angular.fromJson(obj);
a = angular.toJson(a);
console.log(a);
```
###forEach
```
var arr = [{name:1},{name:2},{name:3}];
var result = [];
angular.forEach(arr,function (item) {
    this.push(item.name);
},result);
```




